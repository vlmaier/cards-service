<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>All cards</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"/>
    <script>
        function rowClicked(value) {
            location.href = "cards/" + value;
        }
    </script>
</head>
<body>
<h1 class="mx-4 my-4">All cards</h1>
<a class="ms-4 mb-2 btn btn-outline-primary" href="/">Back</a>
<a class="ms-1 mb-2 btn btn-primary" href="new-card">Add card</a>
<form class="d-inline" th:action="@{/cards}" th:method="DELETE">
    <button class="ms-1 mb-2 btn btn-danger" type="submit">Delete all</button>
</form>
<div class="table-responsive-lg">
    <table class="mx-3 table table-hover align-middle">
        <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">Name</th>
            <th scope="col">Cost</th>
            <th scope="col">Power</th>
            <th scope="col">Ability</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="card: ${cardPage.content}" style="cursor: pointer" th:onclick="'javascript:rowClicked(\'' + ${card.id} + '\');'">
            <td>
                <img class="img-fluid" style="width: 100px" th:src="@{${card.url}}"/>
            </td>
            <td th:text="${card.name}"/>
            <td th:text="${card.cost}"/>
            <td th:text="${card.power}"/>
            <td th:text="${card.ability}"/>
        </tr>
        </tbody>
    </table>
</div>

<nav th:if="${cardPage.totalPages gt 0}">
    <ul class="pagination justify-content-center fw-bold">
        <li class="page-item" th:classappend="${cardPage.number eq 0} ? 'disabled'">
            <a class="page-link"
               th:href="@{/cards(size=${cardPage.size}, page=${cardPage.number lt 2 ? 1 : cardPage.number})}"
               title="Previous Page">
                <span>&laquo;</span>
            </a>
        </li>
        <li class="page-item" th:classappend="${i eq cardPage.number + 1} ? 'active'"
            th:each="i : ${#numbers.sequence(1, cardPage.totalPages)}">
            <a class="page-link" th:href="@{/cards(size=${cardPage.size}, page=${i})}" th:text="${i}"
               th:title="${'Page ' + i}"></a>
        </li>
        <li class="page-item" th:classappend="${cardPage.number + 1 eq cardPage.totalPages} ? 'disabled'">
            <a class="page-link"
               th:href="@{/cards(size=${cardPage.size}, page=${cardPage.number + 2})}"
               title="Next Page">
                <span>&raquo;</span>
            </a>
        </li>
    </ul>
</nav>

</body>
</html>