<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>All cards</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script>
        function imageClicked(value) {
            location.href = "cards/" + value;
        }
    </script>
</head>
<body>
<h1 class="mx-4 my-4">All cards</h1>
<div class="ms-4 d-flex">
    <a class="btn btn-outline-primary" href="cards">
        <i class="material-icons" style="font-size: 20px; vertical-align: text-bottom;">table_rows</i>
    </a>
    <form class="d-flex" th:action="@{/card-grid?keyword=${keyword}}" th:method="GET">
        <input th:if="${cost != null}" type="hidden" name="cost" th:value="${cost}"/>
        <input th:if="${power != null}" type="hidden" name="power" th:value="${power}"/>
        <input class="ms-1 form-control" placeholder="Search" th:name="keyword" th:value="${keyword}" type="text"/>
        <button class="ms-1 btn btn-primary" type="submit">
            <i class="material-icons" style="font-size: 20px; vertical-align: text-bottom;">search</i>
        </button>
    </form>
    <form class="ms-2 d-inline-flex">
        <input th:if="${keyword != null}" type="hidden" name="keyword" th:value="${keyword}"/>
        <div class="d-flex text-center">
            <label for="cost" class="me-1 my-auto control-label">Cost:</label>
            <select class="form-select" name="cost" id="cost">
                <option value="">any</option>
                <option th:each="i : ${costValues}" th:value="${i}" th:text="${i}"
                        th:selected="${i} == ${cost}"></option>
            </select>
        </div>
        <div class="form-group d-flex">
            <label for="power" class="ms-2 me-1 my-auto control-label">Power:</label>
            <select class="ms-1 form-select" name="power" id="power">
                <option value="">any</option>
                <option th:each="i : ${powerValues}" th:value="${i}" th:text="${i}"
                        th:selected="${i} == ${power}"></option>
            </select>
        </div>
        <button class="ms-2 btn btn-primary" type="submit">Apply</button>
    </form>
    <a class="ms-1 btn btn-primary" href="new-card">Add card</a>
    <form class="d-flex" th:action="@{/cards}" th:method="DELETE">
        <button class="ms-1 btn btn-danger" style="vertical-align: text-bottom;" type="submit">Delete all</button>
    </form>
</div>
<div class="container-fluid text-center">
    <div class="row my-4 g-0 px-4">
        <div class="card mx-auto mt-4" style="width: 18rem; cursor: pointer" th:each="card: ${cards}">
            <img class="card-img-top"
                 th:data-id="${card.id}"
                 onclick="imageClicked(this.getAttribute('data-id'));" th:src="@{${card.url}}"/>
            <div class="card-body">
                <h5 class="card-title" th:text="${card.name}"></h5>
                <p class="card-text" th:text="${card.ability eq '' ? 'No ability' : card.ability}"></p>
            </div>
        </div>
    </div>
</div>
</body>
</html>